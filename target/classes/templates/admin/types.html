<!DOCTYPE html>
<!--suppress ThymeleafVariablesResolveInspection -->      <!--使得thymeleaf模板进行后台变量取值时不显示红色波浪线-->

<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="_fragments::adminHead(~{::title})">
    <title>博客分类</title>
</head>


<body style="background: white">
<div id="contextWrap">
    <!--左侧菜单栏-->
    <div th:replace="_fragments::leftmenu"
         class="ui sidebar vertical left menu overlay  borderless visible sidemenu inverted  grey"
         style="-webkit-transition-duration: 0.1s; transition-duration: 0.1s;" data-color="grey">

    </div>

    <!--右侧隐藏小菜单-->
    <div th:replace="_fragments::rightmenu" class="ui right sidebar">

    </div>

    <!--中间部分-->
    <div class="pusher">

        <!--头部导航栏-->
        <div th:replace="_fragments::topmenu" class="navslide navwrap ">

        </div>


        <!--正文内容-->
        <div class="mainWrap navslide">
            <div class="ui segment  segment-border-none">
                <div class="ui grid">
                    <div class="ui four wide tab column">
                        <div class="ui segment teal center aligned  segment-border-none ">
                            <div class="ui teal  label big fluid">博客类别</div>
                            <table class="ui red table left aligned" style=" border:0;">
                                <thead>
                                <tr>
                                    <th>增加类别</th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                            <form class="ui action input small ">
                                <input name="type_name" id="newType" type="text" placeholder="类别名称"/>
                                <div id="addType" class="ui button">增加</div>
                            </form>
                            <table class="ui  table left aligned" style=" border:0;background: #eaeaea">
                                <thead>
                                <tr>
                                    <th>博客分类</th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>
                                        <i class="circle icon large green"></i>
                                        java
                                    </td>
                                    <td>
                                        <div class="ui label green">11篇</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <i class="circle icon large blue"></i>
                                        mysql
                                    </td>
                                    <td>
                                        <div class="ui label blue">3篇</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <i class="circle icon large violet"></i>
                                        Linux
                                    </td>
                                    <td>
                                        <div class="ui label violet">7篇</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <i class="circle icon large purple"></i>
                                        前端基础
                                    </td>
                                    <td>
                                        <div class="ui label purple">14篇</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <i class="circle icon large pink"></i>
                                        网站建设
                                    </td>
                                    <td>
                                        <div class="ui label pink">3篇</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <i class="circle icon large brown"></i>
                                        生活
                                    </td>
                                    <td>
                                        <div class="ui label brown">14篇</div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="ui twelve wide column">
                        <!--发布博客头部区域-->
                        <div class="ui segment red  attached middle aligned  segment-border-none">
                            <div class="ui segment  attached   m-padded segment-border-none">
                                <div class="ui two column grid  middle aligned">
                                    <div class="column">
                                        <h2 class="ui header ">博客类别</h2>
                                        <button id="fresh" type="button" class="ui button basic mini">
                                            刷新&nbsp;&nbsp;&nbsp; <a href=""><i class="refresh icon"></i></a>
                                        </button>
                                    </div>
                                    <div class="right aligned column">
                                        <div class="ui  action input ">
                                            <input type="text" placeholder="Search...">
                                            <button class="ui icon button">
                                                <i class="search icon"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <table class="ui  attached red table middle aligned segment-border-none" frame="void"
                                   rules="none" style="text-align: center !important;">
                                <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>类别</th>
                                    <th>数量</th>
                                    <th>发表时间</th>
                                    <th>操做</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="type:${pageInfo.getList()}">

                                    <td th:text="${type.id}">1</td>
                                    <td th:id="${type.id}" th:text="${type.categoryname}">java</td>
                                    <td th:text="${type.articlenum}">11</td>
                                    <td th:text="${type.addtime}">2019-09-01</td>
                                    <td>
                                        <button th:onclick="'javascript:updateType('+${type.id}+');'"
                                                class="ui button teal mini editType"><i class="edit icon"></i>编辑
                                        </button>
                                        <a href="#" th:href="@{/admin/delete/{id}/category(id=${type.id})}"
                                           class="ui button red mini"><i class="trash icon"></i>删除
                                        </a>
                                    </td>
                                </tr>

                                </tbody>
                                <tfoot>
                                <tr>
                                    <th colspan="10">
                                        每页显示数据量
                                        <select name="gender" class="ui dropdown" id="select">
                                            <option value="male">10条</option>
                                            <option value="female">30条</option>
                                        </select>
                                        <div class="ui right floated pagination menu">
                                            <a class="icon item">
                                                <i class="left chevron icon"></i>
                                            </a>

                                            <a th:href="@{admin/categorys/(startPage=${ pageInfo.getPrePage()})}"
                                               class="item">上一页</a>
                                            <a th:href="@{admin/categorys/(startPage=${pageInfo.getNextPage()})}"
                                               class="item">下一页</a>
                                            <a class="icon item">
                                                <i class="right chevron icon"></i>
                                            </a>
                                        </div>
                                    </th>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui modal small">
            <i class="close icon"></i>
            <div class="header">
                修改博客
            </div>

            <div class="content">
                <div class="ui right labeled left icon input " style="left: 28% !important;">
                    <i class="tags icon"></i>
                    <input id="editType" type="text" placeholder="输入类型名称...">
                    <div class="ui tag label teal">
                        Tags
                    </div>
                </div>
            </div>
            <div class="actions">
                <div class="ui positive  labeled  icon button" style="background-color: red">
                    放弃
                    <i class="remove icon "></i>
                </div>
                <div id="updateType" class="ui positive  labeled icon button ">
                    确认
                    <i class="checkmark icon"></i>
                </div>
            </div>
        </div>
    </div>
</div>


</body>


<th:block th:replace="_fragments::adminscript">
    <!-- <script src="https://cdn.jsdelivr.net/semantic-ui/2.2.4/semantic.min.js"></script>
     <script src="../../static/lib/nicescrool/jquery.nicescroll.min.js"></script>
     <script src="../../static/lib/cookie/js.cookie.js"></script>
     <script src="../../static/js/main.js"></script>


     <script src="../../static/lib/chartjs/Chartv1.min.js"></script>
     <script src="../../static/js/customjs/custom-chart.js"></script>


     <script src="../../static/lib/chartist/chartist.min.js"></script>
     &lt;!&ndash;<script data-pace-options='{ "ajax": false }' src="plugins/pacejs/pace.js"></script>&ndash;&gt;
     <script src="../../static/js/customjs/custom-chart2.js"></script>
     <script src="../../static/lib/editmd/editormd.min.js"></script>-->
</th:block>


<script type="text/javascript">


    //添加一个类别
    $("#addType").click(function () {
        var data = $("#newType").val();
        alert(data);
        $.ajax({
            url: "/admin/addCategory",
            data: {name: data}, //参数值
            type: "POST",    //请求方式
            success: function () {
                window.location.reload();
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    });


    //编辑类别名称
    var ID = "";

    function updateType(id) {
        ID = id;
    }

    $("#updateType").click(function () {
        var data = $("#editType").val();
        alert("ID=" + ID + "data=" + data);
        $.ajax({
            url: "/admin//update/category",
            data: {name: data, id: ID},
            type: "POST",
            success: function () {
                window.location.reload();
            },


            error: function () {
                console.log(e.status);
                console.log(e.responseText);

            }


        });
    });


    //点击刷新数据
    $("#fresh").click(function () {
        alert("刷新");
        $.ajax({
            url: "/admin/categorys",
            type: "GET"      //请求方式
        });
    });


    //弹出层
    $(".editType").click(function () {
        $('.modal').modal('show')
        ;
    });


    //表单校验
    $('.ui.input')
        .form({
            name: {
                identifier: 'type_name',
                rules: [
                    {
                        type: 'empty',
                        prompt: 'Please enter your name'
                    }
                ]
            }

        })
    ;

</script>


</html>
